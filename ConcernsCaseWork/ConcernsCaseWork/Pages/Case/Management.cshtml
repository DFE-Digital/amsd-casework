@page "/case/{id:long}/management"
@model ConcernsCaseWork.Pages.Case.ManagementPageModel

@if (!string.IsNullOrEmpty((string) TempData.Peek("Error.Message")) || Model.CaseModel is null)
{
    <div class="moj-banner__message">
        <p class="govuk-body">@TempData["Error.Message"]</p>
    </div>
    <script type="application/javascript">
        $(function () {
            showGlobalError();
		});
    </script>
}
else
{
	<div class="buttons-topOfPage">
		<a asp-page="../home" role="button" class="govuk-button govuk-button--secondary" data-module="govuk-button">
			Back to casework
		</a>
		<a href="#" role="button" class="govuk-button govuk-button--warning float__right" data-module="govuk-button">
			Close case
		</a>
	</div>


	<h1 class="govuk-heading-l" name="caseID">
		<span class="govuk-caption-m">Case ID</span>
		@Model.CaseModel.Urn
	</h1>

	<h2 class="govuk-heading-m">@Model.CaseModel.TrustName</h2>
	<a href="#" class="govuk-link">Trust overview (TRAMS)</a>

	<dl class="govuk-summary-list summary-list-margin-0 govuk-!-margin-top-6">

		<!-- Concern -->
		<div class="govuk-summary-list__row">
			<dt class="dfe-width-30percent govuk-summary-list__key">
				Primary Concern
			</dt>
			<dd class="govuk-summary-list__value">
				<span class="caseDetail_type">
					@Model.CaseModel.CaseType 
					@if(!string.IsNullOrEmpty(Model.CaseModel.CaseSubType)) {
						<span class="caseDetail_type">
							- @Model.CaseModel.CaseSubType
						</span>
					}
				</span>
			</dd>
			<dd class="dfe-width-15percent govuk-summary-list__actions">
				<a class="govuk-link" href="@Request.Path/editconcerntype">
					Change<span class="govuk-visually-hidden"> primary concern</span>
				</a>
			</dd>
		</div>

		<!-- Risk Rating -->
		<div class="govuk-summary-list__row">
			<dt class="dfe-width-30percent govuk-summary-list__key">
				Risk rating
			</dt>
			<dd class="govuk-summary-list__value govuk-label-wrapper">
				@for (var index = 0; index < Model.CaseModel.RagRating.Count; ++index)
                {
                	<span class="govuk-tag ragtag @Model.CaseModel.RagRatingCss.ElementAt(index)">
                		@Model.CaseModel.RagRating.ElementAt(index)
                	</span>
                }
			</dd>
			<dd class="dfe-width-15percent govuk-summary-list__actions">
				<a class="govuk-link" href="#">
					Change<span class="govuk-visually-hidden"> risk rating</span>
				</a>
			</dd>
		</div>

		<!-- Direction of travel -->
		<div class="govuk-summary-list__row">
			<dt class="dfe-width-30percent govuk-summary-list__key">
				Direction of travel
			</dt>
			<dd class="govuk-summary-list__value">
				@Model.CaseModel.DirectionOfTravel
			</dd>
			<dd class="dfe-width-15percent govuk-summary-list__actions">
				<a class="govuk-link" href="#">
					Change<span class="govuk-visually-hidden"> direction of travel</span>
				</a>
			</dd>
		</div>

	</dl>

	<!--Accordions-->
	<div class="govuk-accordion"
	     data-module="govuk-accordion"
	     id="accordion-default">

		<div class="govuk-accordion__section govuk-accordion__section--expanded">
			<div class="govuk-accordion__section-header">
				<h2 class="govuk-accordion__section-heading">
					<span class="govuk-accordion__section-button" id="accordion-default-heading-1">Issue</span>
				</h2>
			</div>
			<div aria-labelledby="accordion-default-heading-1" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-1">
				<a class="govuk-link float__right" href="#">Edit</a>
				<div class="govuk-body details">
					<p>@Model.CaseModel.Issue</p>
				</div>
			</div>
		</div>

		<div class="govuk-accordion__section govuk-accordion__section--expanded">
			<div class="govuk-accordion__section-header">
				<h2 class="govuk-accordion__section-heading">
					<span class="govuk-accordion__section-button" id="accordion-default-heading-2">Current status</span>
				</h2>
			</div>
			<div aria-labelledby="accordion-default-heading-2" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-2">
				<a class="govuk-link float__right" href="#">Edit</a>
				<div class="govuk-body details">
					<p>@Model.CaseModel.CurrentStatus</p>
				</div>
			</div>
		</div>

		<div class="govuk-accordion__section govuk-accordion__section--expanded">
			<div class="govuk-accordion__section-header">
				<h2 class="govuk-accordion__section-heading">
					<span class="govuk-accordion__section-button" id="accordion-default-heading-3">Case aim</span>
				</h2>
			</div>
			<div aria-labelledby="accordion-default-heading-3" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-3">
				<a class="govuk-link float__right" href="#">Edit</a>
				<div class="govuk-body details">
					<p>@Model.CaseModel.ResolutionStrategy</p>
				</div>
			</div>
		</div>

		<div class="govuk-accordion__section govuk-accordion__section--expanded">
			<div class="govuk-accordion__section-header">
				<h2 class="govuk-accordion__section-heading">
					<span class="govuk-accordion__section-button" id="accordion-default-heading-4">De-escalation point</span>
				</h2>
			</div>
			<div aria-labelledby="accordion-default-heading-4" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-4">
				<a class="govuk-link float__right" href="#">Edit</a>
				<div class="govuk-body details">
					<p>@Model.CaseModel.DeEscalation</p>
				</div>
			</div>
		</div>

		<div class="govuk-accordion__section govuk-accordion__section--expanded">
			<div class="govuk-accordion__section-header">
				<h2 class="govuk-accordion__section-heading">
					<span class="govuk-accordion__section-button" id="accordion-default-heading-5">Next steps</span>
				</h2>
			</div>
			<div aria-labelledby="accordion-default-heading-5" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-5">
				<a class="govuk-link float__right" href="">Edit</a>
				<div class="govuk-body details">
					<p>@Model.CaseModel.NextSteps</p>
				</div>
			</div>
		</div>

	</div>

	<button class="govuk-button govuk-button--secondary" data-module="govuk-button">
		Add to case
	</button>

	<script type="application/javascript">
		$(function () {
			
			
		});
	</script>
}